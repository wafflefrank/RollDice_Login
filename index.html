<!DOCTYPE HTML>
<html lang="zxx">

<head>
	<title>測試登入介面</title>
	<!-- Meta tag Keywords -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="UTF-8" />
	<meta name="keywords"
		content="Effect Login Form Responsive Widget,Login form widgets, Sign up Web forms , Login signup Responsive web form,Flat Pricing table,Flat Drop downs,Registration Forms,News letter Forms,Elements" />
	<script>
		addEventListener("load", function () {
			setTimeout(hideURLbar, 0);
		}, false);

		function hideURLbar() {
			window.scrollTo(0, 1);
		}
	</script>

	<!-- Bootstrap -->
	<!-- CSS only -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
	<!-- bootstrap custom -->
	<link rel="stylesheet" href="all.css">
	<!-- css files -->
	<link rel="stylesheet" href="css/style.css" type="text/css" media="all" />
	<!-- Style-CSS -->
	<link rel="stylesheet" href="css/fontawesome-all.css">
	<!-- Font-Awesome-Icons-CSS -->
	<!-- SweetAlert -->
	<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
	<!-- //css files -->
	<!-- web-fonts -->
	<link href="//fonts.googleapis.com/css?family=Josefin+Sans:100,100i,300,300i,400,400i,600,600i,700,700i"
		rel="stylesheet">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i"
		rel="stylesheet">
	<!-- //web-fonts -->
</head>

<body>

	<!-- HTML -->
	<div id="app">
		<!-- bg effect -->
		<div id="bg">
			<canvas></canvas>
			<canvas></canvas>
			<canvas></canvas>
		</div>
		<!-- //bg effect -->

		<!-- title -->
		<h1 v-if="pagename === 'login-page'" class="fs-1">登入頁面</h1>
		<h1 v-if="pagename === 'register-page'"  class="fs-1">註冊頁面</h1>
		<!-- //title -->

		<!-- 登入頁面 -->
		<div class="sub-main-w3 " v-if="pagename === 'login-page'">
			<form action="#" method="post" class="position-relative">
				
                <a :href="index" class="fs-5 text-white position-absolute top-0 end-0 mt-3">回大廳	
				<i class="fas fa-chevron-right text-deepRed"></i>
				</a>
				<h2 class="fs-3">現在登入
					<i class="fas fa-level-down-alt"></i>
				</h2>
				<div class="form-style-agile">
					<label>
						<i class="fas fa-user"></i>
						<span class="fs-5">帳號</span>
					</label>
					<input placeholder="請輸入帳號" name="Name" type="text" required="">
				</div>
				<div class="form-style-agile">
					<label>
						<i class="fas fa-unlock-alt"></i>
						<span class="fs-5">密碼</span>
					</label>
					<input placeholder="請輸入密碼" name="Password" type="password" required="">
				</div>
				<!-- checkbox -->
				<div class="wthree-text">
					<ul>
						<li>
							<label class="anim">
								<input type="checkbox" class="checkbox" required="">
								<span>保持登入</span>
							</label>
						</li>
						<li>
							<a href="#">忘記密碼 ?</a>
						</li>
					</ul>
				</div>
				<!-- //checkbox -->
				<a href="#">
				<button type="button" class="btn btn-deepRed btn-lg px-5 rounded-pill" >
					登入</button>
				</a>
				<button type="button" class="btn btn-deepRed btn-lg px-5 rounded-pill ms-5"
					@click="pagename = 'register-page'">註冊</button>
						
			</form>
		</div>

		<!-- //登入頁面 -->

		<!-- 註冊頁面 -->

		<div class="sub-main-w3" v-if="pagename === 'register-page'">
			<v-form action="#" method="post" v-slot="{ errors }" @submit="onSubmit" class="position-relative pb-4">
				<a :href="index" class="fs-5 text-white position-absolute top-0 end-0 mt-3">回大廳	
					<i class="fas fa-chevron-right text-deepRed"></i>
					</a>
				<h2 class="fs-3">現在註冊
					<i class="fas fa-level-down-alt"></i>
				</h2>
				<div class="form-style-agile mb-0">
					<label>
						<i class="fas fa-user"></i>
						<span class="fs-5">新帳號</span>
					</label>
					<v-field placeholder="請輸入帳號" name="帳號" type="email" required="" v-model="loginForm.account"
						rules="alpha_num|required" id="account" :class="{'is-invalid': errors['帳號'] }"
						class="form-control py-3 " style="border-radius:20px;"></v-field>
					<error-message name="帳號" class="invalid-feedback"></error-message>

				</div>
				<div class="form-style-agile mb-0">
					<label>
						<i class="fas fa-unlock-alt"></i>
						<span class="fs-5">新密碼</span>
					</label>
					<v-field placeholder="請輸入密碼" name="密碼" type="password" required="" v-model="loginForm.pwd"
						rules="min:6|required" id="password" :class="{'is-invalid': errors['密碼'] }"
						class="form-control py-3 " style="border-radius:20px;"></v-field>
					<error-message name="密碼" class="invalid-feedback"></error-message>
				</div>
				<div class="form-style-agile mb-0">
					<label>
						<i class="fas fa-address-book"></i>
						<span class="fs-5">姓名</span>
					</label>
					<v-field placeholder="請輸入姓名" name="姓名" type="email" required="" v-model="loginForm.name"
						rules="max:10|required" id="Name" :class="{'is-invalid': errors['姓名'] }"
						class="form-control py-3 " style="border-radius:20px;"></v-field>
					<error-message name="姓名" class="invalid-feedback"></error-message>

				</div>
				<div class="form-style-agile">
					<label>
						<i class="fas fa-envelope"></i>
						<span class="fs-5">信箱</span>
					</label>
					<v-field placeholder="請輸入信箱" name="email" type="email" required="" v-model="loginForm.email"
						rules="email|required" id="email" :class="{'is-invalid': errors['email'] }"
						class="form-control py-3 " style="border-radius:20px;"></v-field>
					<error-message name="email" class="invalid-feedback"></error-message>
				</div>

				<!-- checkbox -->
				<div class="wthree-text">
					<ul>
						<li>
							<a href="#" @click="pagename = 'login-page'" class="fs-5">登入</a>
						</li>
					</ul>
				</div>
				<!-- //checkbox -->

				<button class="btn btn-deepRed btn-lg px-5  rounded-pill" type="submit">註冊</button>


			</v-form>
		</div>
		<!-- //註冊頁面 -->
	</div>
	<!-- //HTML -->

	<!-- Vue -->
	<script src="https://unpkg.com/vue@next"></script>
	<!-- // Vue -->

	<!-- Axios -->
	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<!-- //Axios -->

	<!-- VeeValidation  -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/vee-validate/4.1.17/vee-validate.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@vee-validate/i18n@4.1.17/dist/vee-validate-i18n.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@vee-validate/rules@4.1.17/dist/vee-validate-rules.min.js"></script>
	<!-- //VeeValidation   -->


	<!-- 主程式 -->
	<script>
		// VeeValidateRules表單驗證規則
		Object.keys(VeeValidateRules).forEach(rule => {
			if (rule !== 'default') {
				VeeValidate.defineRule(rule, VeeValidateRules[rule]);
			}
		});
		VeeValidateI18n.loadLocaleFromURL('./zh_TW.json');

		// Activate the locale
		VeeValidate.configure({
			generateMessage: VeeValidateI18n.localize('zh_TW'),
			validateOnInput: true, // 調整為輸入字元立即進行驗證
		});

		// Vue
		const app = Vue.createApp({
			data() {
				return {
					apiUrl: "http://192.168.1.104:4000",
					index: "https://wafflefrank.github.io/RollDice-Lobby/",
					pagename: 'login-page',
					loginForm: {
						account: "",
						pwd: "",
						name: "",
						email: "",
					},
					userErrMsg: "",
					usernameError: false,
					emailError: false,
					accountError: false,
					pwdError: false,

				}
			},
			methods: {
				onSubmit(values, { resetForm }) {
					// axios
					axios.post(`${this.apiUrl}/member/register`, this.loginForm)
						.then(function (response) {
							if (response.data.code === '200') {
								swal("Welcome!", "註冊成功!", "success");

								console.log(response.data);
							}
							else {
								swal("註冊失敗", `${response.data.msg}`, "error");
								console.log(response.data);
							}

						})
						.catch(function (error) {
							alert(`註冊失敗，帳號已註冊過`);
							console.log(error);
						});
					resetForm(); // 把表單重置成預設值
				},
			},
			mounted() {

			},



		});
		app.component('VForm', VeeValidate.Form);
		app.component('VField', VeeValidate.Field);
		app.component('ErrorMessage', VeeValidate.ErrorMessage);

		app.mount('#app');
		

	</script>

	<!-- //主程式 -->

	<!-- JavaScript Bundle with Popper -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8"
		crossorigin="anonymous"></script>

	<!-- Jquery -->
	<script src="js/jquery-3.3.1.min.js"></script>
	<!-- //Jquery -->

	<!-- effect js -->
	<script src="js/canva_moving_effect.js"></script>
	<!-- //effect js -->

</body>

</html>